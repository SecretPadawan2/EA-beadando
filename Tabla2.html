<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Táblázat CRUD</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid black;
            padding: 8px;
            text-align: left;
        }
        th {
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h2>Táblázat kezelése</h2>
    <input type="text" id="search" placeholder="Keresés..." onkeyup="filterTable()">
    <table id="dataTable">
        <thead>
            <tr>
                <th onclick="sortTable(0)">Név</th>
                <th onclick="sortTable(1)">Kor</th>
                <th onclick="sortTable(2)">Email</th>
                <th onclick="sortTable(3)">Műveletek</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    <h3>Új sor hozzáadása</h3>
    <input type="text" id="name" placeholder="Név" required minlength="3">
    <input type="number" id="age" placeholder="Kor" required min="1" max="120">
    <input type="email" id="email" placeholder="Email" required>
    <button onclick="addRow()">Hozzáadás</button>
    
    <script>
        function addRow() {
            let name = document.getElementById("name").value;
            let age = document.getElementById("age").value;
            let email = document.getElementById("email").value;
            if (!name || name.length < 3 || !age || age < 1 || age > 120 || !email) {
                alert("Hibás adatok!");
                return;
            }
            let table = document.getElementById("dataTable").getElementsByTagName('tbody')[0];
            let newRow = table.insertRow();
            newRow.innerHTML = `<td>${name}</td><td>${age}</td><td>${email}</td>
                <td><button onclick="editRow(this)">Szerkesztés</button>
                <button onclick="deleteRow(this)">Törlés</button></td>`;
            document.getElementById("name").value = "";
            document.getElementById("age").value = "";
            document.getElementById("email").value = "";
        }
        
        function deleteRow(button) {
            button.parentElement.parentElement.remove();
        }
        
        function editRow(button) {
            let row = button.parentElement.parentElement;
            let name = prompt("Név:", row.cells[0].innerText);
            let age = prompt("Kor:", row.cells[1].innerText);
            let email = prompt("Email:", row.cells[2].innerText);
            if (name && name.length >= 3 && age && age >= 1 && age <= 120 && email) {
                row.cells[0].innerText = name;
                row.cells[1].innerText = age;
                row.cells[2].innerText = email;
            } else {
                alert("Hibás adatok!");
            }
        }
        
        function sortTable(n) {
            let table = document.getElementById("dataTable");
            let rows = Array.from(table.rows).slice(1);
            let sortedRows = rows.sort((a, b) => a.cells[n].innerText.localeCompare(b.cells[n].innerText, 'hu', {numeric: true}));
            table.tBodies[0].append(...sortedRows);
        }
        
        function filterTable() {
            let filter = document.getElementById("search").value.toLowerCase();
            let rows = document.querySelectorAll("#dataTable tbody tr");
            rows.forEach(row => {
                row.style.display = Array.from(row.cells).some(cell => cell.innerText.toLowerCase().includes(filter)) ? "" : "none";
            });
        }
    </script>
</body>
</html>
